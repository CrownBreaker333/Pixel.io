
<!DOCTYPE html>
<html>
<head>
    <title>Epic Pixel Platformer</title>
    <style>
        body {
            margin: 0;
            overflow: hidden;
            background: #87ceeb;
        }
        #gameCanvas {
            display: block;
            margin: 0 auto;
            background: #5c8a3f;
        }
        #score {
            font-family: sans-serif;
            font-size: 20px;
            color: white;
            text-align: center;
            margin-top: 10px;
        }
    </style>
</head>

<body>

<canvas id="gameCanvas" width="480" height="240"></canvas>
<div id="score">Score: 0</div>

<!-- IMAGES -->
<img id="playerImg" src="images/player.png" style="display:none;">
<img id="coinImg" src="images/coin.png" style="display:none;">
<img id="blockImg" src="images/block.png" style="display:none;">

<script>
const canvas = document.getElementById('gameCanvas');
const ctx = canvas.getContext('2d');

const FLOOR_Y = canvas.height - 32;
const SPRITE_SIZE = 16;

let score = 0;

/* -------- PLAYER CLASS -------- */
class Player {
    constructor() {
        this.x = 50;
        this.y = FLOOR_Y;
        this.vy = 0;
        this.onGround = true;
        this.width = SPRITE_SIZE;
        this.height = SPRITE_SIZE;
    }

    update() {
        if (!this.onGround) {
            this.vy += 0.5; // gravity
            this.y += this.vy;

            if (this.y >= FLOOR_Y) {
                this.y = FLOOR_Y;
                this.vy = 0;
                this.onGround = true;
            }
        }
    }

    jump() {
        if (this.onGround) {
            this.vy = -8;
            this.onGround = false;
        }
    }

    draw() {
        const img = document.getElementById('playerImg');
        ctx.drawImage(img, this.x, this.y, this.width, this.height);
    }
}

const player = new Player();

/* -------- COINS -------- */
const coins = [
    { x: 120, y: FLOOR_Y - 16, collected: false },
    { x: 200, y: FLOOR_Y - 16, collected: false },
    { x: 280, y: FLOOR_Y - 16, collected: false }
];

/* -------- BLOCKS -------- */
const blocks = [
    { x: 160, y: FLOOR_Y - 16, width: 16, height: 16 },
    { x: 240, y: FLOOR_Y - 32, width: 16, height: 16 }
];

/* -------- INPUT -------- */
const keys = {};

window.addEventListener('keydown', (e) => keys[e.key] = true);
window.addEventListener('keyup', (e) => keys[e.key] = false);

/* -------- CHECK COINS -------- */
function checkCoins() {
    coins.forEach(coin => {
        if (!coin.collected &&
            player.x < coin.x + SPRITE_SIZE &&
            player.x + SPRITE_SIZE > coin.x &&
            player.y < coin.y + SPRITE_SIZE &&
            player.y + SPRITE_SIZE > coin.y) {

            coin.collected = true;
            score++;
            document.getElementById("score").innerText = "Score: " + score;
        }
    });
}

/* -------- GAME LOOP -------- */
function gameLoop() {
    ctx.clearRect(0, 0, canvas.width, canvas.height);

    // movement
    if (keys["ArrowLeft"] || keys["a"]) player.x -= 2;
    if (keys["ArrowRight"] || keys["d"]) player.x += 2;
    if (keys["ArrowUp"] || keys["w"] || keys[" "]) player.jump();

    player.update();
    player.draw();

    // floor
    ctx.fillStyle = "#654321";
    ctx.fillRect(0, FLOOR_Y + SPRITE_SIZE, canvas.width, 10);

    // coins
    const coinImg = document.getElementById("coinImg");
    coins.forEach(coin => {
        if (!coin.collected)
            ctx.drawImage(coinImg, coin.x, coin.y, SPRITE_SIZE, SPRITE_SIZE);
    });

    // blocks
    const blockImg = document.getElementById("blockImg");
    blocks.forEach(block => {
        ctx.drawImage(blockImg, block.x, block.y, block.width, block.height);
    });

    checkCoins();

    requestAnimationFrame(gameLoop);
}

gameLoop();
</script>

</body>
</html>
